<form class="form-horizontal" role="from" on-submit="save()" novalidate>
	<div class="col-md-12">
		<div class="tabs-container">
			<uib-tabset>
				<uib-tab heading="{{tabs[0].name}}" active="tabs[0].active">
					<div class="panel-body">
						<div class="col-md-12">
							<div class="form-group to-validate">
								<label class="col-md-3 control-label">Nombre</label>
								<div class="col-md-9">
									<input validation type="text" class="form-control" ng-model="game.name" required>
								</div>
							</div>

							<div class="form-group to-validate">
								<label class="col-md-3 control-label">Descripción</label>
								<div class="col-md-9">
									<textarea validation type="text" class="form-control" ng-model="game.description" required style="resize: vertical;" rows="7"></textarea>
								</div>
							</div>

							<div class="form-group to-validate">
								<label class="col-md-3 control-label">Fecha de Lanzamiento</label>
								<div class="col-md-3">
									<input validation type="datetime" class="form-control" uib-datepicker-popup="dd-MM-yyyy" ng-model="game.releaseDate" is-open="openDate" ng-click="openDate = true" data-mask="99-99-9999" required>
								</div>
							</div>

							<div class="form-group to-validate">
								<label class="col-md-3 control-label">Restricción de Contenido</label>
								<div class="col-md-3">
									<ui-select id="image-select" ng-model="game.contentRating" theme="bootstrap">
										<ui-select-match allow-clear placeholder="Seleccione...">
											<img ng-src="{{$select.selected.other}}" style="max-width: 50%;">
										</ui-select-match>
										<ui-select-choices repeat="content in contentRatings">
											<img ng-src="{{content.other}}" style="max-width: 50%;">
										</ui-select-choices>
									</ui-select>
								</div>
							</div>

							<div class="form-group" ng-repeat="gameMagazine in game.magazineRatings">
								<div class="to-validate">
									<label class="col-md-3 control-label">Rating {{gameMagazine.magazine.name}}</label>
									<div class="col-md-3">
										<div id="rating-slider-{{$index}}" ion-range-slider range-options="getSliderOptions(gameMagazine)"></div>
									</div>
								</div>

								<div class="col-md-2">
									<img ng-src="{{gameMagazine.magazine.other}}" style="max-width: 100%;">
								</div>

								<div class="to-validate">
									<label class="col-md-1 control-label">URL</label>
									<div class="col-md-3">
										<input validation type="url" class="form-control" ng-model="gameMagazine.url" required>
									</div>
								</div>
							</div>

							<div class="form-group to-validate">
								<label class="col-md-3 control-label">Consolas</label>
								<div class="col-md-4">
									<multi-select validation id="image-multi-select" ng-model="game.consoles" list="consoles" property="console" match-template="consoleMatch.html" choice-template="consoleChoice.html" required></multi-select>
									<script type="text/ng-template" id="consoleMatch.html">
										<img ng-src="{{$item.base64}}" style="max-width: 100%; width: 100%;">
									</script>
									<script type="text/ng-template" id="consoleChoice.html">
										<img ng-src="{{item.base64}}" style="max-width: 100%;">
									</script>
								</div>
							</div>

							<div class="form-group to-validate">
								<label class="col-md-3 control-label">Categorias</label>
								<div class="col-md-4">
									<multi-select validation ng-model="game.categories" list="categories" property="category" match-template="categoryMatch.html" choice-template="categoryChoice.html" required></multi-select>
									<script type="text/ng-template" id="categoryMatch.html">
										<div style="display: inline-block; vertical-align: middle; padding: 2%;">
											<div class="col-md-2">
												<img ng-src="{{$item.base64}}" style="max-width: 100%;">
											</div>
											<div class="col-md-10">
												{{$item.name}}
											</div>
										</div>
									</script>
									<script type="text/ng-template" id="categoryChoice.html">
										<div class="row">
											<div class="col-md-2">
												<img ng-src="{{item.base64}}" style="max-width: 100%;">
											</div>
											<div class="col-md-10">
												{{item.name}}
											</div>
										</div>
									</script>
								</div>
							</div>

							<div class="form-group to-validate">
								<label class="col-md-3 control-label">Costo Promedio por Semana</label>
								<div class="col-md-3">
									<div class="input-group">
										<input validation type="number" class="form-control" ng-model="game.averageWeekCost" required min="0">
										<span class="input-group-addon"><i class="fa fa-dollar"></i></span>
									</div>
								</div>
							</div>

							<div class="form-group to-validate">
								<label class="col-md-3 control-label">Coins por Cargar Juego</label>
								<div class="col-md-3">
									<div class="input-group">
										<input validation type="number" class="form-control" ng-model="game.uploadPayment" required min="0">
										<span class="input-group-addon"><i class="fa fa-dollar"></i></span>
									</div>
								</div>
							</div>
						</div>
					</div>
				</uib-tab>

				<uib-tab heading="{{tabs[1].name}}" active="tabs[1].active">
					<div class="panel-body">
						<div class="form-group to-validate">
							<label class="col-md-3 control-label">Banner</label>
							<div class="col-md-5">
								<image-upload ng-model="images.banner" archive="game.banner" required></image-upload>
							</div>
						</div>

						<div class="form-group to-validate">
							<label class="col-md-3 control-label">Cover</label>
							<div class="col-md-5">
								<image-upload ng-model="images.cover" archive="game.cover" required></image-upload>
							</div>
						</div>

						<div class="form-group">
							<label class="col-md-3 control-label">Corte Rombo</label>
							<div id="diamond-div" class="col-md-5" style="overflow: hidden; cursor: move;" ng-style="getCropStyle()" ng-mousedown="beginDrag($event)" ng-mouseup="endDrag()" ng-mousemove="drag($event)" ng-mouseleave="endDrag()">
								<img class="crop-image" ng-src="{{coverBase64}}" ng-style="getPositionStyle(game.diamondCrop)">
								<div class="crop-image" style="width: 100%;" ng-style="getCropStyle()">
									<svg width="100%" height="100%" viewBox="0 0 100 100" preserveAspectRatio="none">
										<path d="M0 0 h100 v100 h-100 z M23 53 L47 77 C47 77 50 80 53 77 L77 53 C77 53 80 50 77 47 L53 23 C53 23 50 20 47 23 L23 47 C23 47 20 50 23 53 z" style="fill: rgba(50, 50, 50, 0.6);"></path>	
									</svg>
								</div>
							</div>
							<div class="col-md-1" ng-style="getCropStyle()">
								<rzslider rz-slider-model="game.diamondCrop.c" rz-slider-options="zoomOptions"></rzslider>
							</div>
						</div>

						<div class="form-group">
							<label class="col-md-3 control-label">Url del Trailer</label>
							<div class="col-md-8">
								<div class="input-group">
									<input validation type="url" class="form-control" ng-model="game.trailerUrl">
									<span class="input-group-btn">
										<button type="button" class="btn btn-w-m btn-default" ng-click="changeVideo()">
											<i class="fa fa-youtube fa-lg" style="margin-right: 5%"></i>
											<span>Aplicar</span>
										</button>
									</span>
								</div>
							</div>
						</div>

						<div class="form-group">
							<div class="col-md-1"></div>

							<div class="col-md-10" style="text-align: center;">
								<iframe id="video-frame" width="100%" height="{{getVideoHeight()}}" frameborder="0" allowfullscreen ng-src="{{url}}" ng-if="url != null && url != ''"></iframe>
							</div>
						</div>
					</div>
				</uib-tab>
			</uib-tabset>
		</div>

		<div class="ibox">
			<div class="ibox-content">
				<div class="col-md-12" style="text-align: right;">
					<button type="submit" class="btn btn-w-m btn-primary">Guardar</button>
					<button type="button" class="btn btn-w-m btn-default" ng-click="cancel()">Cancel</button>
				</div>

				<div class="clearfix"></div>
			</div>
		</div>
	</div>
</form>

<style type="text/css">
	#image-select .ui-select-choices-row-inner {
		text-align: center;
	}

	#image-select .ui-select-match-text {
		text-align: center;
	}

	#image-select .form-control {
		height: auto !important;
		display: inline-block;
	}

	#image-select .ui-select-toggle > i {
		top: 15px;
	}

	#image-select .ui-select-toggle > a {
		position: absolute;
		top: 5%;
		right: 10px;
		margin-top: -2px;
	}

	.crop-image {
		position: absolute;
		top: 0em;
		left: 0em;
	}
</style>