<div id="profile">
    <section class="row header">
        <div class="col-md-4 col-xs-5"></div>
        <div class="col-md-8 col-xs-7 no-padding-left no-padding-right responsive-margin-bottom">
            <div class="col-md-10 name">
                <div class="col-md-3 no-padding-left no-padding-right">
                    <img id="avatar_img" archive="currentUser.avatar.image" placeholder="img/contact-person.svg">
                </div>
                <div class="col-md-9">
                    <h1 class="title">{{currentUser.name}} {{currentUser.lastName}}</h1>
                    <div class="col-md-12 no-padding-left no-padding-right">
                        <div class="connection">&uacute;ltima vez conectado: <span>{{currentUser.lastConnection | date: 'dd-MM-yyyy'}}</span></div>
                    </div>
                    <button class="btn btn-tertiary full small" ng-click="chooseAvatar()">Cambiar avatar</button>
                </div>
            </div>
            <div class="clearfix"></div>
        </div>
        <div class="clearfix"></div>

        <div class="col-md-4 col-xs-0"></div>
        <div class="col-md-8 col-xs-12 no-padding-left no-padding-right">
            <div class="col-md-12 completed">
                Usuario completado: <span>{{getFullPercentaje()}}%</span>
            </div>
            <p class="col-md-12 description">
                Completa los 3 niveles de registro para poder navegar en toda la plataforma, pedir prestado cualquier juego y ganar 100 coins mensuales.
            </p>
            <div class="col-md-12 check-list">
                <li><div class="box" ng-class="getInfoPercentage() >= 100 ? 'checked' : ''"></div><span>Completa tu informaci&oacute;n de contacto</span></li>
                <li><div class="box" ng-class="getIdentityPercentage() >= 100 ? 'checked' : ''"></div><span>Completa tu verificaci&oacute;n de identidad</span></li>
                <li><div class="box" ng-class="currentUser.numberOfGames > 0 ? 'checked' : ''"></div><span>Mant&eacute;n m&iacute;nimo un juego cargado en la WEB</span></li>
            </div>
        </div>
        <div class="clearfix"></div>
    </section>
    <section class="row contact-information">
        <form role="form" on-submit="save()" novalidate>
            <div class="completed">
                <span class="col-md-12">Informaci&oacute;n de contacto</span>
                <div class="col-md-12">
                    <button type="submit" class="btn btn-tertiary full small" ng-if="isEditable">Guardar perfil</button>
                </div>
                <div class="col-md-12">
                    <button type="button" class="btn btn-tertiary small" ng-click="editInfo()">{{isEditable ? 'Volver' : 'Editar perfil'}}</button>
                </div>
            </div>
            <div class="col-md-4"></div>
            <div class="col-md-8 form">
                <div class="col-md-12 col-xs-12 to-validate ci-req">
                    <label>N&uacute;mero de c&eacute;dula</label>
                    <input ng-disabled="!isEditable" ng-model="currentUserTemp.document">
                </div>
                <div class="col-md-12 col-xs-12 to-validate">
                    <label>Fecha de nacimiento</label>
                    <date-selector ng-model="currentUserTemp.birthDate" ng-disabled="!isEditable" show-calendar="true" />
                </div>
                <div class="col-md-12 col-xs-12 to-validate">
                    <label>Ocupaci&oacute;n</label>
                    <input class="ocupation" placeholder="Estudiante - Programador" ng-disabled="!isEditable" ng-model="currentUserTemp.profession" ng-change="onBlur()"/>
                </div>
                <div class="col-md-6 col-xs-12">
                    <label class="col-xs-12 col-md-4">Provincia</label>
                    <div class="col-xs-12 col-md-8">
                        <ui-select ng-model="currentUserTemp.province" theme="bootstrap" class="selector" ng-disabled="!isEditable" ng-change="findCities()">
                            <ui-select-match allow-clear>{{$select.selected.name | limitTo:10}}{{$select.selected.name.length > 10 ? '...' : ''}}</ui-select-match>
                            <ui-select-choices repeat="province in provinces | filter: $select.search">
                                <div ng-bind-html="province.name | highlight: $select.search"></div>
                            </ui-select-choices>
                        </ui-select>
                    </div>
                </div>
                <div class="clearfix"></div>
                <div class="col-md-6 col-xs-12">
                    <label class="col-xs-12 col-md-4">Ciudad</label>
                    <div class="col-xs-12 col-md-8">
                        <ui-select ng-model="currentUserTemp.location" theme="bootstrap" class="selector" ng-disabled="!isEditable">
                            <ui-select-match allow-clear>{{$select.selected.name | limitTo:10}}{{$select.selected.name.length > 10 ? '...' : ''}}</ui-select-match>
                            <ui-select-choices repeat="city in locationCities | filter: $select.search">
                                <div ng-bind-html="city.name | highlight: $select.search"></div>
                            </ui-select-choices>
                        </ui-select>
                    </div>
                </div>
                <div class="clearfix"></div>
                <div class="col-md-12 col-xs-12 to-validate billing">
                    <label class="col-xs-12 col-md-4">Direcci√≥n de domicilio</label>
                    <div class="col-xs-12 col-md-12 billing-address">
                        <textarea type="address" ng-disabled="!isEditable" ng-model="currentUserTemp.billingAddress" rows="2" maxlength="150" placeholder="Calle Principal - Numeraci&oacute;n - Calle Secundaria - Sector - Referncia"></textarea>
                    </div>
                </div>
                <div class="clearfix"></div>
                <div class="col-md-12 col-xs-12 to-validate phone">
                    <label>Tel&eacute;fono de contacto</label>
                    <div class="col-xs-7 col-md-8">
                        <input type="phone" ng-disabled="!isEditable" ng-model="currentUserTemp.contactPhone" class="complete" />
                    </div>
                </div>
            </div>
            <div class="clearfix"></div>
        </form>
    </section>
    <section id="ruc-section" class="row contact-ruc">
        <form role="form" on-submit="save()" novalidate>
            <div class="completed">
                <div class="col-md-12 col-xs-12 icon-help">
                    <img id="warning_img" src="img/warning-icon.svg" alt="warning-icon" height="42" width="42">
                </div>
                <span class="col-md-12 col-xs-12">&iquest;TIENES RUC?</span>
                <span class="col-md-12 col-xs-12 ruc-help">Si posees Ruc es obligatorio registrarlo para poder facturar todas las transacciones que se hagan. Desde pagar prestamos hasta retirar tus ganancias.</span>
                <div class="col-md-12 col-xs-12">
                    <div class="box" ng-class="currentUserTemp.hasRuc ? 'checked' : ''" ng-click="currentUserTemp.hasRuc = !currentUserTemp.hasRuc"></div>
                </div>
            </div>
            <div class="col-md-4"></div>
            <div class="col-md-8 form">
                <div class="col-md-12  line">
                    <label>NOMBRE</label>
                    <input ng-model="currentUserTemp.nameRuc" ng-disabled="!currentUserTemp.hasRuc" required> <!-- ng-disabled="!active" -->
                </div>
                <div class="col-md-12  line">
                    <label>N&#176; DE RUC</label>
                    <input ng-model="currentUserTemp.documentRuc" ng-disabled="!currentUserTemp.hasRuc" ng-pattern="/^[0-9]/" required /> <!-- ng-disabled="!active" -->
                </div>
                <div class="col-md-12" to-validate>
                    <label>DIRECCI&#211;N DE FACTURACI&#211;N</label>
                    <div class="col-xs-12 col-md-12 billing-address">
                        <textarea type="address" ng-model="currentUserTemp.addressRuc" ng-disabled="!currentUserTemp.hasRuc" rows="0" maxlength="150" placeholder="Calle Principal - Numeraci&oacute;n - Calle Secundaria - Sector - Referncia" required></textarea><!-- ng-disabled="!active" -->
                    </div>
                </div>
                <div class="col-md-12 to-validate  line">
                    <label>TEL&#201;FONO</label>
                    <input ng-model="currentUserTemp.phoneRuc" ng-disabled="!currentUserTemp.hasRuc" required> <!-- ng-disabled="!active" -->
                </div>
                <div class="col-md-12 rigth" >
                    <button type="submit" class="btn btn-secundary small" ng-disabled="!currentUserTemp.hasRuc">GUARDAR INFORMACI&#211;N</button>
                </div>
            </div>

            <div class="clearfix"></div>
        </form>
    </section>
    <section class="row contact-means">
        <form role="form" ng-submit="changeMail()">
            <div class="completed">
                <div class="col-md-12 text-center">
                    <span class="subtitle">
                        <div class="col-md-2"></div>
                        <div class="col-md-8">
                            <i class="gc gc-mail"></i>
                            <span ng-if="currentUser.token">Verifica tu correo</span>
                            <span ng-if="!currentUser.token">Tu correo ha sido verificado</span>
                        </div>
                        <div class="col-md-2"></div>
                        <div class="clearfix"></div>
                    </span>
                    <span class="description">Verifica que tu correo electr&oacute;nico es correcto y funcional. Se te enviar&aacute; un mail con un c&oacute;digo de verificaci&oacute;n.</span>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="form">
                <div class="col-xs-12 col-md-3"></div>
                <div class="col-xs-12 col-md-6">
                    <input placeholder="XXXX@MAIL.COM" ng-model="newUsername" ng-readonly="!isEditableMean">
                    <button type="button" class="btn btn-primary full small" ng-click="resendMailVerification()" ng-if="currentUser.token">Verificar</button>
                    <img class="verification-ok" src="img/verification-ok-icon.svg" ng-if="!currentUser.token">
                </div>
                <div class="col-xs-12 col-md-3"></div>
                <div class="clearfix"></div>
            </div>
        </form>
    </section>

    <section class="row games">
        <div class="col-xs-12 col-md-4">
            <img src="img/books-icon.svg" />
            <button class="btn btn-tertiary small" ng-click="$state.go('gameclub.account.myGames')">Cargar juego a tu biblioteca</button>
        </div>
        <div class="col-xs-12 col-md-8">
            <span>Juegos cargados: <span class="quantity" ng-class="currentUser.numberOfGames > 0 ? 'more' : ''">{{currentUser.numberOfGames}}</span></span>
            <p>Para poder pedir prestado cualquier juego, tu tienes que cargar un juego para que pueda ser pedido / prestado. Si prestas, juegas.</p>
        </div>
        <div class="clearfix"></div>
    </section>
</div>
