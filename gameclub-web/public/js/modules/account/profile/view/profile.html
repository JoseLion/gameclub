<div id="profile">
    <section class="row header">
        <div class="col-md-4"></div>
        <div class="col-md-8 no-padding-left no-padding-right">
            <div class="col-md-10 name">
                <div class="col-md-3 no-padding-left no-padding-right">
                    <img id="avatar_img" archive="currentUser.avatar.image" placeholder="img/contact-person.svg">
                </div>
                <div class="col-md-9">
                    <h2 class="title">{{currentUser.name}} {{currentUser.lastName}}</h2>
                    <div class="col-md-12 no-padding-left no-padding-right">
                        <div class="connection">&uacute;ltima vez conectado: <span>{{currentUser.lastConnection | date: 'dd-MM-yyyy'}}</span></div>
                    </div>
                    <button class="btn btn-tertiary full small" ng-click="chooseAvatar()">Cambiar avatar</button>
                </div>
            </div>
            <div class="clearfix"></div>
            <div class="col-md-12 completed">
                Usuario completado: <span>{{getFullPercentaje()}}%</span>
            </div>
            <p class="col-md-12 description">
                Completa los 3 niveles de registro para poder navegar en toda la plataforma, pedir prestado cualquier juego y ganar 100 coins mensuales.
            </p>
            <div class="col-md-12 check-list">
                <li><div class="box" ng-class="getInfoPercentage() >= 100 ? 'checked' : ''"></div><span>Completa tu informaci&oacute;n de contacto</span></li>
                <li><div class="box" ng-class="getIdentityPercentage() >= 100 ? 'checked' : ''"></div><span>Completa tu verificaci&oacute;n de identidad</span></li>
                <li><div class="box" ng-class="currentUser.numberOfGames > 0 ? 'checked' : ''"></div><span>Mant&eacute;n m&iacute;nimo un juego cargado en la WEB</span></li>
            </div>
        </div>
        <div class="clearfix"></div>
    </section>
    <section class="row contact-information">
        <form role="form" on-submit="save()" novalidate>
            <div class="completed">
                <span class="col-md-12">Informaci&oacute;n de contacto</span>
                <div class="col-md-12">
                    <button type="submit" class="btn btn-tertiary full small" ng-if="isEditable">Guardar perfil</button>
                </div>
                <div class="col-md-12">
                    <button type="button" class="btn btn-tertiary small" ng-click="editInfo()">{{isEditable ? 'Volver' : 'Editar perfil'}}</button>
                </div>
            </div>
            <div class="col-md-4"></div>
            <div class="col-md-8 form">
                <div class="col-md-12 to-validate ci-req">
                    <label>N&uacute;mero de c&eacute;dula</label>
                    <input ng-disabled="!isEditable" ng-model="currentUserTemp.document">
                </div>
                <div class="col-md-12 to-validate">
                    <label>Fecha de nacimiento</label>
                    <date-selector ng-model="currentUserTemp.birthDate" ng-disabled="!isEditable" show-calendar="true">
                </div>
                <div class="col-md-12 to-validate">
                    <label>Ocupaci&oacute;n</label>
                    <input class="ocupation" placeholder="Estudiante - Programador" ng-disabled="!isEditable" ng-model="currentUserTemp.profession"/>
                </div>
                <div class="col-md-6">
                    <label class="col-xs-12 col-md-4">Provincia</label>
                    <div class="col-xs-12 col-md-8">
                        <ui-select ng-model="currentUserTemp.province" theme="bootstrap" class="selector" ng-disabled="!isEditable" ng-change="findCities()">
                            <ui-select-match allow-clear>{{$select.selected.name | limitTo:10}}{{$select.selected.name.length > 10 ? '...' : ''}}</ui-select-match>
                            <ui-select-choices repeat="province in provinces | filter: $select.search">
                                <div ng-bind-html="province.name | highlight: $select.search"></div>
                            </ui-select-choices>
                        </ui-select>
                    </div>
                </div>
                <div class="clearfix"></div>
                <div class="col-md-6">
                    <label class="col-xs-12 col-md-4">Ciudad</label>
                    <div class="col-xs-12 col-md-8">
                        <ui-select ng-model="currentUserTemp.location" theme="bootstrap" class="selector" ng-disabled="!isEditable">
                            <ui-select-match allow-clear>{{$select.selected.name | limitTo:10}}{{$select.selected.name.length > 10 ? '...' : ''}}</ui-select-match>
                            <ui-select-choices repeat="city in locationCities | filter: $select.search">
                                <div ng-bind-html="city.name | highlight: $select.search"></div>
                            </ui-select-choices>
                        </ui-select>
                    </div>
                </div>
                <div class="clearfix"></div>
                <div class="col-md-12 to-validate billing">
                    <label class="col-xs-12 col-md-4">Direcci√≥n de domicilio</label>
                    <div class="col-xs-12 col-md-12 billing-address">
                        <textarea type="address" ng-disabled="!isEditable" ng-model="currentUserTemp.billingAddress" rows="2" maxlength="150" placeholder="Calle Principal - Numeraci&oacute;n - Calle Secundaria - Sector - Referncia"></textarea>
                    </div>
                </div>
                <div class="clearfix"></div>
                <div class="col-md-12 to-validate phone">
                    <label class="col-xs-12 col-md-4">Tel&eacute;fono de contacto</label>
                    <div class="col-xs-12 col-md-8">
                        <input type="phone" ng-disabled="!isEditable" ng-model="currentUserTemp.contactPhone" class="complete" />
                    </div>
                </div>
            </div>
            <div class="clearfix"></div>
        </form>
    </section>
    <section class="contact-means">
        <form role="form" ng-submit="changeMail()">
            <div class="completed">
                <div class="col-md-12 text-center">
                    <span class="subtitle">
                        <div class="col-md-4"></div>
                        <div class="col-md-4">
                            <i class="gc gc-mail"></i>
                            <!--<span>Verificaci&oacute;n de tu correo</span>-->
                            <span ng-if="currentUser.token">Verifica tu correo</span>
                            <span ng-if="!currentUser.token">Tu correo ha sido verificado</span>
                        </div>
                        <div class="col-md-4 text-left">
                            <!--<button type="submit" class="btn btn-primary small" ng-if="isEditableMean">Guardar info</button>
                            <button type="button" class="btn btn-primary small" ng-click="editContactMean()">{{isEditableMean ? 'Volver' : 'Cambiar correo'}}</button>-->
                        </div>
                    </span>
                    <div class="clearfix"></div>
                    <span class="description">Verifica que tu correo electr&oacute;nico es correcto y funcional. Se te enviar&aacute; un mail con un c&oacute;digo de verificaci&oacute;n.</span>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="row form">
                <div class="col-xs-12 col-md-3"></div>
                <div class="col-xs-12 col-md-6">
                    <input placeholder="XXXX@MAIL.COM" ng-model="newUsername" ng-readonly="!isEditableMean">
                    <button type="button" class="btn btn-primary full small" ng-click="resendMailVerification()" ng-if="currentUser.token">Verificar</button>
                    <img class="verification-ok" src="img/verification-ok-icon.svg" ng-if="!currentUser.token">
                </div>
                <div class="col-xs-12 col-md-3"></div>
                <div class="clearfix"></div>
            </div>
        </form>
    </section>
    <section class="row contact-ruc">
        <form role="form" on-submit="saveRuc()" novalidate>
            <div class="completed">
                <img id="warning_img" archive="warning_img" placeholder="img/warning-icon.svg" height="42" width="42">
                <br>
                <span class="col-md-12">&#191;TIENES RUC&#63;</span>
                <br/>
                <h6><span class="col-md-12"><B>Si posees Ruc es obligatorio registrarlo para poder facturar todas las transacciones que se hagan. Desde pagar prestamos hasta retirar tus ganancias.</B></span></h6>
                <br><br><br>
                <input type="checkbox" name="ruc" value="checkboxRuc" ng-model="active" ><br>
            </div>
            <div class="col-md-4"></div>
            <div class="col-md-8 form">
                <div class="col-md-12  line">
                    <label>NOMBRE</label>
                    <input ng-model="name" ng-disabled="!active" required>
                </div>
                <div class="col-md-12  line">
                    <label>N&#176; DE RUC</label>
                    <input ng-disabled="!active" ng-model="numberRuc" ng-pattern="/^[0-9]/" required />
                </div>
                <div class="col-md-12" to-validate>
                    <label>DIRECCI&#211;N DE FACTURACI&#211;N</label>
                    <div class="col-xs-12 col-md-12 billing-address">
                        <textarea type="address" ng-model="billingAddress" rows="0" maxlength="150" ng-disabled="!active" placeholder="Calle Principal - Numeraci&oacute;n - Calle Secundaria - Sector - Referncia" required></textarea>
                    </div>
                </div>
                <div class="col-md-12 to-validate  line">
                    <label>TEL&#201;FONO</label>
                    <input ng-disabled="!active" ng-model="numberphone" required>
                </div>
                <!-- <div class="col-md-12 line">
                    <label class="col-xs-12 col-md-4">TEL&#201;FONO</label>
                    <div class="col-xs-12 col-md-8">
                        <input type="phone" ng-disabled="!isEditable" ng-model="currentUserTemp.contactPhone" class="complete" />
                    </div>
                </div> -->
                <div class="col-md-12 rigth" >
                    <button type="button" class="btn btn-secundary small" ng-click="chechRuc()" >GUARDAR INFORMACI&#211;N</button>
            </div>
            </div>
            
            <div class="clearfix"></div>
        </form>
    </section>
    <section class="row games">
        <div class="col-xs-12 col-md-4">
            <img src="img/books-icon.svg" />
            <button class="btn btn-tertiary small" ng-click="$state.go('gameclub.account.myGames')">Cargar juego a tu biblioteca</button>
        </div>
        <div class="col-xs-12 col-md-8">
            <span>Juegos cargados: <span class="quantity" ng-class="currentUser.numberOfGames > 0 ? 'more' : ''">{{currentUser.numberOfGames}}</span></span>
            <p>Para poder pedir prestado cualquier juego, tu tienes que cargar un juego para que pueda ser pedido / prestado. Si prestas, juegas.</p>
        </div>
        <div class="clearfix"></div>
    </section>
</div>
